---
import Cookies from './Cookies'
import Slider from './Slider'
import ResponsiveMenu from './ResponsiveMenu'

interface Props {
  showSlider?: boolean
  showCategories?: boolean
}

const { showSlider = true, showCategories = false } = Astro.props
---

<header id='header' class='w-full bg-white transition sticky top-0 z-50 py-4 border-b-gray-200 border-b-[1px]'>
  <div class='w-[90%] mx-auto'>
    <section class='w-full flex justify-between items-center gap-8'>
      <div class='hidden md:block'>
        <a title='Logo' href='/'>
          <img
            class='w-24 object-cover object-center'
            src='/logo.jpeg'
            alt='Logo de la tienda'
            title='Logo de la tienda'
          />
        </a>
      </div>

      <section
        class='flex-1 flex justify-center overflow-hidden rounded-md'
      >
        <form class='flex justify-center gap-2 w-full md:w-2/3 items-center' action='/search' method='get'>
          <input
            type='text'
            name='query'
            class='py-2 px-4 outline-none block flex-1 border-[1px] border-gray-300 rounded'
            placeholder='Buscar'
          />

          <button
            type='submit'
            class='p-2 bg-indigo-600 hover:bg-indigo-700 hover:scale-105 hover:shadow-lg inline-block transition rounded text-white [&>svg]:w-6 [&>svg]:h-6'
          >
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
              <path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"></path>
              <path d="M21 21l-6 -6"></path>
            </svg>
          </button>
        </form>
      </section>

      <div class='hidden md:flex md:justify-end'>
        <ul class='flex justify-center md:justify-end items-center gap-2'>
          <li>
            <a
              href='/contact'
              title='Teléfono'
              class='flex text-gray-800 p-1 hover:bg-gray-100 rounded-md justify-between items-center gap-1 text-sm [&>svg]:w-4 [&>svg]:h-4'
            >
              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-phone-filled" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path d="M9 3a1 1 0 0 1 .877 .519l.051 .11l2 5a1 1 0 0 1 -.313 1.16l-.1 .068l-1.674 1.004l.063 .103a10 10 0 0 0 3.132 3.132l.102 .062l1.005 -1.672a1 1 0 0 1 1.113 -.453l.115 .039l5 2a1 1 0 0 1 .622 .807l.007 .121v4c0 1.657 -1.343 3 -3.06 2.998c-8.579 -.521 -15.418 -7.36 -15.94 -15.998a3 3 0 0 1 2.824 -2.995l.176 -.005h4z" stroke-width="0" fill="currentColor"></path>
              </svg>
              Contacto
            </a>
          </li>

          <li>
            <a
              href='/account'
              title='Mi cuenta'
              class='flex text-gray-800 p-1 hover:bg-gray-100 rounded-md justify-between items-center gap-1 text-sm [&>svg]:w-4 [&>svg]:h-4'
            >
              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0"></path>
                <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"></path>
              </svg>
              Mi cuenta
            </a>
          </li>

          <li>
            <a
              href='/wish-list'
              title='Lista de deseos'
              class='flex text-gray-800 p-1 hover:bg-gray-100 rounded-md justify-between items-center gap-1 text-sm [&>svg]:w-4 [&>svg]:h-4'
            >
              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-heart-filled" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path d="M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z" stroke-width="0" fill="currentColor"></path>
              </svg>{' '}
              Lista de deseos
            </a>
          </li>

          <li>
            <a
              href='/cart'
              title='Carrito de compras'
              class='flex text-gray-800 p-1 hover:bg-gray-100 rounded-md justify-between items-center gap-1 text-sm [&>svg]:w-4 [&>svg]:h-4'
            >
              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-shopping-cart-filled" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path d="M6 2a1 1 0 0 1 .993 .883l.007 .117v1.068l13.071 .935a1 1 0 0 1 .929 1.024l-.01 .114l-1 7a1 1 0 0 1 -.877 .853l-.113 .006h-12v2h10a3 3 0 1 1 -2.995 3.176l-.005 -.176l.005 -.176c.017 -.288 .074 -.564 .166 -.824h-5.342a3 3 0 1 1 -5.824 1.176l-.005 -.176l.005 -.176a3.002 3.002 0 0 1 1.995 -2.654v-12.17h-1a1 1 0 0 1 -.993 -.883l-.007 -.117a1 1 0 0 1 .883 -.993l.117 -.007h2zm0 16a1 1 0 1 0 0 2a1 1 0 0 0 0 -2zm11 0a1 1 0 1 0 0 2a1 1 0 0 0 0 -2z" stroke-width="0" fill="currentColor"></path>
              </svg>
              Carrito
            </a>
          </li>
        </ul>
      </div>
    </section>
  </div>

  <ResponsiveMenu client:visible />
</header>

{showSlider && <Slider client:visible />}

{showSlider && (
  <h1 class='w-[90%] mx-auto mt-6 text-center text-4xl font-bold text-indigo-700'>
    Ganadería el Infierno
  </h1>
)}

{showCategories && (
  <h1 class='w-[90%] md:max-w-6xl mx-auto my-3 text-2xl font-semibold text-slate-700 mb-4'>
    Categorías principales
  </h1>

  <div class='w-full'>
    <section class='w-[90%] md:max-w-6xl mx-auto mt-4'>
      <ul class='flex gap-3'>
        <li>
          <a
            href='/categories/catalogo'
            title='Catalogo'
            class='text-white bg-indigo-500 hover:bg-indigo-600 hover:scale-105 hover:shadow-lg inline-block transition font-bold py-1 px-4 text-sm rounded'
          >
            Catalogo
          </a>
        </li>

        <li>
          <a
            href='/categories/alimento'
            title='Alimento'
            class='text-white bg-indigo-500 hover:bg-indigo-600 hover:scale-105 hover:shadow-lg inline-block transition font-bold py-1 px-4 text-sm rounded'
          >
            Alimento
          </a>
        </li>

        <li>
          <a
            href='/categories/toros'
            title='Toros'
            class='text-white bg-indigo-500 hover:bg-indigo-600 hover:scale-105 hover:shadow-lg inline-block transition font-bold py-1 px-4 text-sm rounded'
          >
            Toros
          </a>
        </li>

        <li>
          <a
            href='/categories/vacas'
            title='Vacas'
            class='text-white bg-indigo-500 hover:bg-indigo-600 hover:scale-105 hover:shadow-lg inline-block transition font-bold py-1 px-4 text-sm rounded'
          >
            Vacas
          </a>
        </li>

        <li>
          <a
            href='/categories/nutricional'
            title='De engorda'
            class='text-white bg-indigo-500 hover:bg-indigo-600 hover:scale-105 hover:shadow-lg inline-block transition font-bold py-1 px-4 text-sm rounded'
          >
            De engorda
          </a>
        </li>
      </ul>
    </section>
  </div>
)}

<Cookies client:load />

<script>
  const $header = document.querySelector('#header')!

  document.addEventListener('scroll', () => {
    if (window.scrollY > 0) {
      $header.classList.add('py-1')
      $header.classList.remove('py-4')
      $header.classList.add('shadow-lg')
    } else {
      $header.classList.remove('py-1')
      $header.classList.add('py-4')
      $header.classList.remove('shadow-lg')
    }
  })
</script>
