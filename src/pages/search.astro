---
import Layout from '../layouts/Layout.astro'
import Products from '../components/Products.astro'
import { products } from '../data/db'
import type { Product } from '../types/products'
const { url } = Astro.request
const params = new URL(url)

const query = params.searchParams.get('query')

console.log(query)
let filteredProducts: Product[] = []

filteredProducts = products.filter((p) => p.name.includes(`${query}`) || p.model.includes(`${query}`) || p.description.includes(`${query}`) || p['short-description'].includes(`${query}`))

---

<Layout
	title="Ganadería el infierno | calidad para tu ganadería"
	description="Tienda en linea para la venta de ganado, alimento para ganado, vacas, toros, forrajes, alimentos balanceados, becerros, etc."
  imageFullUrl="https://ganaderia-el-infierno.vercel.app/images/logo-magtimus.png"
> 
	<Products products={filteredProducts}/>
</Layout>