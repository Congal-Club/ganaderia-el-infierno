---
import Products from "../../components/Products.astro";
import { products } from "../../data/db";
import Layout from "../../layouts/Layout.astro";
import type { Product } from "../../types/product";

const { query } = Astro.params;
let filteredProducts: Product[] = [];

switch (query) {
  case "alimento": {
    filteredProducts = products.filter(
      (p) =>
        p.categories.includes("Alimentación") ||
        p.categories.includes("Engorda") ||
        p.categories.includes("Forraje")
    );
    break;
  }
  case "toros": {
    filteredProducts = products.filter(
      (p) =>
        p.categories.includes("Toros") ||
        p.categories.includes("Carne") ||
        p.categories.includes("Becerro") ||
        p.categories.includes("Registro")
    );
    break;
  }
  case "vacas": {
    filteredProducts = products.filter(
      (p) => p.categories.includes("Vaca") || p.categories.includes("Leche")
    );
    break;
  }
  case "nutricional": {
    filteredProducts = products.filter((p) => p.categories.includes("Salud"));
    break;
  }
  default: {
    filteredProducts = products;
    break;
  }
}
---

<Layout
  title="Ganadería el infierno | perfil de usuario"
  description="Tienda en linea para la venta de ganado, alimento para ganado, vacas, toros, forrajes, alimentos balanceados, becerros, etc."
  imageFullUrl="https://ganaderia-el-infierno.vercel.app/images/logo-magtimus.png"
  showSlider={false}
  showCategories={true}
>
  <Products
    products={filteredProducts}
    title={`Productos destacados de ${query}`}
  />
</Layout>
 ../../data/orders
